#include <iostream>
#include "TrafficGraph.h"
using namespace std;

int main()
{
	// val~为菜单选项
	int val1 = 1, val2 = 1, val3 = 1;
	// 起点终点城市编号
	int start = -1, end = -1;
	// 建立交通图
	int arc = 10, vex = 7;
	GraphInfo Traffic[10] =
	{	{1,2,{2553,8,885}},
		{1,4,{704,2.5,225}},
		{1,3,{696,2.3,202}},
		{2,3,{511,1.5,148}},
		{3,4,{349,1.2,112}},
		{2,5,{812,3,283}},
		{4,7,{651,2,162}},
		{5,6,{2368,7,684}},
		{6,7,{1385,4,386}},
		{3,6,{1579,5,495}} };
	VertexType V[7] = { "北京","西安","郑州","徐州","成都","广州","上海" };
	TrafficGraph TG(V, Traffic, vex, arc);
	TG.Floyed();
	while (val1)
	{
		ShowGraph();
		MainMenu();
		cin >> val1;
		switch (val1)
		{
		case 0:	// 退出
			cout << "\n\t\t\t\t\t程序退出，欢迎下次使用！\n";
			break;
		case 1:	// 交通查询
			flag:
			cout << "\n\t\t\t--------------------\n";
			cout << "\t\t\t请输入您的始发地编号：";
			cin >> start;
			cout << "\t\t\t请输入您的目的地编号：";
			cin >> end;
			LowcostMenu();
			cin >> val2;
			// val2==0返回
			if (!val2)
				goto flag;
			cout << "\n\t\t\t-----------------------------\n";
			cout << "\t\t\t已为您选择";
			TG.PrintCity(start - 1, end - 1);
			cout << "最佳路线\n\n\t\t\t";
			TG.FindPath(start - 1, end - 1, val2);
			TG.PrintInfo(start - 1, end - 1, val2);
			system("pause");
			system("cls");
			break;
		case 2:	// 管理员模式
			system("cls");
			AdminMenu();
			cin >> val2;
			switch (val2)
			{
			case 1:
				cout << "\n\t\t\t1距离，2时间，3花费，4中转" << endl;
				cout << "\t\t\t请选择打印的权值：";
				cin >> val3;
				TG.PrintGraphMat(val3);
				TG.PrintPathMat(val3);
				TG.PrintDistMat(val3);
				system("pause");
				system("cls");
				break;
			case 2:
				
				system("pause");
				system("cls");
				break;
			case 3:
				system("pause");
				system("cls");
				break;
			default:
			case 0:
				system("cls");
				continue;
			}
			break;
		default:
			break;
		}
	}

	return 0;
}